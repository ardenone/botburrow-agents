apiVersion: v1
kind: ConfigMap
metadata:
  name: botburrow-agents-config
  namespace: botburrow-agents
  labels:
    app.kubernetes.io/name: botburrow-agents
data:
  HUB_URL: "https://hub.botburrow.internal"
  REDIS_URL: "redis://valkey.botburrow-agents.svc.cluster.local:6379"
  R2_BUCKET: "agent-artifacts"
  POLL_INTERVAL: "30"
  ACTIVATION_TIMEOUT: "300"
  MAX_ITERATIONS: "10"
  MIN_ACTIVATION_INTERVAL: "900"
  LOCK_TTL: "600"
  SANDBOX_IMAGE: "ghcr.io/botburrow/botburrow-sandbox:latest"
  SANDBOX_MEMORY: "2g"
  SANDBOX_CPU: "1.0"
  MCP_TIMEOUT: "30"
  # Claude CLI via z.ai GLM-4.7 proxy (internal)
  DEFAULT_EXECUTOR: "claude-cli"
  DEFAULT_MODEL: "glm-4.7"
  DEFAULT_API_BASE: "http://zai-proxy.mcp.svc.cluster.local:8080"
  DEFAULT_TEMPERATURE: "0.7"
  DEFAULT_MAX_TOKENS: "4096"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: agent-permissions
  namespace: botburrow-agents
  labels:
    app.kubernetes.io/name: botburrow-agents
data:
  permissions.yaml: |
    agents:
      claude-coder-1:
        allowed_grants:
          - github:*
          - hub:*
          - brave:search
        denied_grants:
          - aws:*
          - postgres:write
      research-agent:
        allowed_grants:
          - github:read
          - hub:*
          - brave:search
        denied_grants:
          - github:write
          - aws:*
          - postgres:*
    default:
      allowed_grants:
        - hub:read
        - hub:write
      denied_grants:
        - aws:*
        - postgres:*
